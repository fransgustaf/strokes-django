 <html>
    <script type="text/javascript">

    var scale = 3;
    var dataset = {{ strokes_data }};
    console.log(dataset);

//    var dataset = {'data': [{'dots': [{'x': 290.0, 'y': 162.0}, {'x': 295.0, 'y': 162.0}, {'x': 300.0, 'y': 162.0}, {'x': 306.0, 'y': 162.0}, {'x': 315.0, 'y': 162.0}, {'x': 326.0, 'y': 162.0}, {'x': 336.0, 'y': 162.0}, {'x': 341.0, 'y': 162.0}, {'x': 344.0, 'y': 162.0}, {'x': 347.0, 'y': 163.0}, {'x': 351.0, 'y': 169.0}, {'x': 353.0, 'y': 173.0}, {'x': 356.0, 'y': 178.0}, {'x': 357.0, 'y': 183.0}, {'x': 357.0, 'y': 186.0}, {'x': 357.0, 'y': 188.0}, {'x': 357.0, 'y': 189.0}, {'x': 357.0, 'y': 190.0}, {'x': 354.0, 'y': 192.0}, {'x': 350.0, 'y': 194.0}, {'x': 346.0, 'y': 196.0}, {'x': 341.0, 'y': 198.0}, {'x': 333.0, 'y': 200.0}, {'x': 329.0, 'y': 201.0}, {'x': 323.0, 'y': 201.0}, {'x': 317.0, 'y': 201.0}, {'x': 311.0, 'y': 201.0}, {'x': 303.0, 'y': 201.0}, {'x': 298.0, 'y': 201.0}, {'x': 295.0, 'y': 201.0}, {'x': 289.0, 'y': 201.0}, {'x': 287.0, 'y': 201.0}, {'x': 286.0, 'y': 201.0}, {'x': 286.0, 'y': 201.0}, {'x': 285.0, 'y': 201.0}, {'x': 285.0, 'y': 202.0}, {'x': 285.0, 'y': 202.0}, {'x': 287.0, 'y': 205.0}, {'x': 292.0, 'y': 211.0}, {'x': 296.0, 'y': 215.0}, {'x': 303.0, 'y': 223.0}, {'x': 311.0, 'y': 231.0}, {'x': 318.0, 'y': 241.0}, {'x': 323.0, 'y': 248.0}, {'x': 329.0, 'y': 255.0}, {'x': 333.0, 'y': 259.0}, {'x': 335.0, 'y': 262.0}, {'x': 337.0, 'y': 264.0}, {'x': 338.0, 'y': 265.0}, {'x': 340.0, 'y': 267.0}, {'x': 341.0, 'y': 268.0}, {'x': 342.0, 'y': 269.0}, {'x': 342.0, 'y': 270.0}, {'x': 342.0, 'y': 270.0}, {'x': 342.0, 'y': 269.0}]}]}
//    var dataset = {"data": [{"dots": [{"x": 54,"y": 158},{"x": 54,"y": 161},{"x": 54,"y": 169},{"x": 54,"y": 174},{"x": 54,"y": 181},{"x": 54,"y": 189},{"x": 54,"y": 206},{"x": 54,"y": 210},{"x": 54,"y": 216},{"x": 54,"y": 221},{"x": 55,"y": 225},{"x": 55,"y": 227},{"x": 55,"y": 230},{"x": 55,"y": 232},{"x": 55,"y": 232},{"x": 55,"y": 233},{"x": 56,"y": 233},{"x": 56,"y": 233},{"x": 56,"y": 233},{"x": 56,"y": 235},{"x": 56,"y": 237},{"x": 56,"y": 240},{"x": 56,"y": 244},{"x": 56,"y": 247},{"x": 56,"y": 249},{"x": 56,"y": 249},{"x": 56,"y": 250}]},{"type": "stroke","dots": [{"x": 57,"y": 160},{"x": 61,"y": 160},{"x": 67,"y": 160},{"x": 74,"y": 160},{"x": 82,"y": 160},{"x": 90,"y": 160},{"x": 101,"y": 160},{"x": 106,"y": 161},{"x": 108,"y": 163},{"x": 108,"y": 164},{"x": 108,"y": 167},{"x": 108,"y": 170},{"x": 107,"y": 174},{"x": 104,"y": 178},{"x": 96,"y": 184},{"x": 92,"y": 187},{"x": 86,"y": 190},{"x": 82,"y": 192},{"x": 79,"y": 193},{"x": 77,"y": 194},{"x": 77,"y": 194},{"x": 76,"y": 195},{"x": 77,"y": 195},{"x": 79,"y": 195},{"x": 82,"y": 196},{"x": 86,"y": 197},{"x": 91,"y": 198},{"x": 98,"y": 199},{"x": 108,"y": 200},{"x": 113,"y": 201},{"x": 118,"y": 201},{"x": 121,"y": 202},{"x": 123,"y": 203},{"x": 123,"y": 203},{"x": 123,"y": 204},{"x": 123,"y": 208},{"x": 121,"y": 215},{"x": 117,"y": 223},{"x": 115,"y": 232},{"x": 110,"y": 246},{"x": 107,"y": 253},{"x": 104,"y": 259},{"x": 101,"y": 262},{"x": 97,"y": 264},{"x": 93,"y": 265},{"x": 86,"y": 266},{"x": 81,"y": 266},{"x": 77,"y": 266},{"x": 73,"y": 266},{"x": 71,"y": 265},{"x": 70,"y": 265},{"x": 69,"y": 265},{"x": 69,"y": 265},{"x": 69,"y": 265},{"x": 69,"y": 264},{"x": 69,"y": 264},{"x": 67,"y": 263},{"x": 66,"y": 263},{"x": 65,"y": 261},{"x": 65,"y": 260},{"x": 63,"y": 259},{"x": 63,"y": 257},{"x": 62,"y": 256},{"x": 62,"y": 254},{"x": 62,"y": 252},{"x": 62,"y": 250},{"x": 62,"y": 248},{"x": 62,"y": 247},{"x": 62,"y": 246},{"x": 62,"y": 246}]},{"type": "stroke","dots": [{"x": 134,"y": 162},{"x": 134,"y": 164},{"x": 134,"y": 167},{"x": 134,"y": 173},{"x": 134,"y": 178},{"x": 134,"y": 182},{"x": 134,"y": 192},{"x": 134,"y": 201},{"x": 135,"y": 213},{"x": 135,"y": 223},{"x": 135,"y": 244},{"x": 135,"y": 249},{"x": 135,"y": 252},{"x": 135,"y": 255},{"x": 135,"y": 259},{"x": 135,"y": 261},{"x": 135,"y": 264},{"x": 135,"y": 266},{"x": 135,"y": 269},{"x": 135,"y": 270},{"x": 135,"y": 271},{"x": 135,"y": 272},{"x": 136,"y": 272},{"x": 136,"y": 272},{"x": 137,"y": 272},{"x": 140,"y": 272},{"x": 144,"y": 272},{"x": 150,"y": 272},{"x": 159,"y": 272},{"x": 161,"y": 272},{"x": 167,"y": 272},{"x": 169,"y": 272},{"x": 170,"y": 272},{"x": 170,"y": 272},{"x": 170,"y": 271},{"x": 169,"y": 271},{"x": 167,"y": 270}]},{"type": "stroke","dots": [{"x": 144,"y": 220},{"x": 147,"y": 220},{"x": 151,"y": 220},{"x": 155,"y": 220},{"x": 158,"y": 220},{"x": 160,"y": 220},{"x": 161,"y": 220},{"x": 161,"y": 220},{"x": 161,"y": 220}]},{"type": "stroke","dots": [{"x": 141,"y": 169},{"x": 145,"y": 169},{"x": 147,"y": 169},{"x": 154,"y": 169},{"x": 157,"y": 169},{"x": 158,"y": 169}]},{"type": "stroke","dots": [{"x": 192,"y": 163},{"x": 192,"y": 165},{"x": 192,"y": 171},{"x": 192,"y": 175},{"x": 192,"y": 181},{"x": 192,"y": 192},{"x": 192,"y": 197},{"x": 192,"y": 202},{"x": 192,"y": 208},{"x": 192,"y": 216},{"x": 192,"y": 226},{"x": 192,"y": 234},{"x": 193,"y": 243},{"x": 195,"y": 253},{"x": 196,"y": 262},{"x": 196,"y": 264},{"x": 196,"y": 269},{"x": 197,"y": 270},{"x": 197,"y": 271},{"x": 197,"y": 272},{"x": 197,"y": 272},{"x": 197,"y": 272},{"x": 197,"y": 272},{"x": 198,"y": 272},{"x": 199,"y": 272},{"x": 201,"y": 271},{"x": 205,"y": 271},{"x": 213,"y": 271},{"x": 219,"y": 270},{"x": 227,"y": 269},{"x": 233,"y": 269},{"x": 237,"y": 268},{"x": 239,"y": 267},{"x": 240,"y": 267},{"x": 241,"y": 267},{"x": 242,"y": 267}]},{"type": "stroke","dots": [{"x": 194,"y": 215},{"x": 199,"y": 215},{"x": 205,"y": 215},{"x": 215,"y": 215},{"x": 226,"y": 215},{"x": 235,"y": 215},{"x": 243,"y": 215},{"x": 252,"y": 215},{"x": 252,"y": 215},{"x": 253,"y": 215}]},{"type": "stroke","dots": [{"x": 191,"y": 170},{"x": 192,"y": 170},{"x": 194,"y": 170},{"x": 197,"y": 170},{"x": 199,"y": 170},{"x": 202,"y": 170},{"x": 214,"y": 170},{"x": 220,"y": 170},{"x": 224,"y": 170},{"x": 228,"y": 170},{"x": 231,"y": 170},{"x": 232,"y": 170},{"x": 233,"y": 170},{"x": 233,"y": 170},{"x": 234,"y": 170},{"x": 235,"y": 170},{"x": 235,"y": 170},{"x": 235,"y": 170}]},{"type": "stroke","dots": [{"x": 284,"y": 162},{"x": 284,"y": 167},{"x": 284,"y": 173},{"x": 284,"y": 180},{"x": 284,"y": 190},{"x": 285,"y": 203},{"x": 287,"y": 226},{"x": 288,"y": 236},{"x": 289,"y": 243},{"x": 290,"y": 249},{"x": 291,"y": 257},{"x": 291,"y": 258},{"x": 291,"y": 259},{"x": 291,"y": 260},{"x": 291,"y": 261},{"x": 291,"y": 265},{"x": 291,"y": 269},{"x": 291,"y": 271},{"x": 291,"y": 272},{"x": 291,"y": 273},{"x": 291,"y": 273},{"x": 291,"y": 274},{"x": 290,"y": 274}]},{"type": "stroke","dots": [{"x": 290,"y": 162},{"x": 295,"y": 162},{"x": 300,"y": 162},{"x": 306,"y": 162},{"x": 315,"y": 162},{"x": 326,"y": 162},{"x": 336,"y": 162},{"x": 341,"y": 162},{"x": 344,"y": 162},{"x": 347,"y": 163},{"x": 351,"y": 169},{"x": 353,"y": 173},{"x": 356,"y": 178},{"x": 357,"y": 183},{"x": 357,"y": 186},{"x": 357,"y": 188},{"x": 357,"y": 189},{"x": 357,"y": 190},{"x": 354,"y": 192},{"x": 350,"y": 194},{"x": 346,"y": 196},{"x": 341,"y": 198},{"x": 333,"y": 200},{"x": 329,"y": 201},{"x": 323,"y": 201},{"x": 317,"y": 201},{"x": 311,"y": 201},{"x": 303,"y": 201},{"x": 298,"y": 201},{"x": 295,"y": 201},{"x": 289,"y": 201},{"x": 287,"y": 201},{"x": 286,"y": 201},{"x": 286,"y": 201},{"x": 285,"y": 201},{"x": 285,"y": 202},{"x": 285,"y": 202},{"x": 287,"y": 205},{"x": 292,"y": 211},{"x": 296,"y": 215},{"x": 303,"y": 223},{"x": 311,"y": 231},{"x": 318,"y": 241},{"x": 323,"y": 248},{"x": 329,"y": 255},{"x": 333,"y": 259},{"x": 335,"y": 262},{"x": 337,"y": 264},{"x": 338,"y": 265},{"x": 340,"y": 267},{"x": 341,"y": 268},{"x": 342,"y": 269},{"x": 342,"y": 270},{"x": 342,"y": 270},{"x": 342,"y": 269}]}]};

    var canvas, ctx = false;
    
    function init() {
        canvas = document.getElementById('can');
        ctx = canvas.getContext("2d");

    var background = new Image();
    //background.src = "https://s3-ap-southeast-1.amazonaws.com/fs-background-images/" +  address + ".jpeg"

    background.onload = function(){
    //ctx.drawImage(background,0,0);
    }

    
        console.log("number of strokes " + dataset.data.length)
		for (i = 0; i < dataset.data.length; i++) {
			//console.log("iiiiii " + i)

        	draw(dataset.data[i].dots);
    	}
    }
    
    function draw(dots) {
        console.log("number of dots " + dots.length)
    	ctx = canvas.getContext("2d");
    	var prevX = dots[0].x * scale;
    	var prevY = dots[0].y * scale;
		for (j = 1; j < dots.length; j++) {
			//console.log("jjjjjjjj " + j)
			console.log("drawing " + prevX + " " + prevY + " " + dots[j].x + " " + dots[j].y);
			ctx.beginPath();
			ctx.moveTo(prevX, prevY);
			ctx.lineTo(dots[j].x * scale, dots[j].y * scale);
			ctx.strokeStyle = "black";
			ctx.lineWidth = 2;
			ctx.stroke();
			ctx.closePath();
			prevX = dots[j].x * scale;
			prevY = dots[j].y * scale;
		}
    }

    </script>
    <body onload="init()">

        <canvas id="can" width="630" height="891" style="background:url(https://s3-ap-southeast-1.amazonaws.com/fs-background-images/{{address}}.jpeg); background-size: 100% 100%;"></canvas>
	<div>{{ recognition_value }}</div>
    </body>
    </html>
